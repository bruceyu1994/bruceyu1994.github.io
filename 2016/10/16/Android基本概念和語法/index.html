<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Android基本概念和語法 | Bruce Yu的个人博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Android,語法," />
  

  <meta name="description" content="1. 什么是Intent?Intent的中文意思是“意图，意向”，在Android中提供了Intent机制来协助应用间的交互与通讯，Intent负责对应用中一次操作的动作、动作涉及数据、附加数据进行描述，Android则根据此Intent的描述，负责找到对应的组件，将 Intent传递给调用的组件，并完成组件的调用。Intent不仅可用于应用程序之间，也可用于应用程序内部的Activity/Ser">
<meta property="og:type" content="article">
<meta property="og:title" content="Android基本概念和語法">
<meta property="og:url" content="https://bruceyu1994.github.io/2016/10/16/Android基本概念和語法/index.html">
<meta property="og:site_name" content="Bruce Yu的个人博客">
<meta property="og:description" content="1. 什么是Intent?Intent的中文意思是“意图，意向”，在Android中提供了Intent机制来协助应用间的交互与通讯，Intent负责对应用中一次操作的动作、动作涉及数据、附加数据进行描述，Android则根据此Intent的描述，负责找到对应的组件，将 Intent传递给调用的组件，并完成组件的调用。Intent不仅可用于应用程序之间，也可用于应用程序内部的Activity/Ser">
<meta property="og:updated_time" content="2016-10-16T05:00:22.887Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android基本概念和語法">
<meta name="twitter:description" content="1. 什么是Intent?Intent的中文意思是“意图，意向”，在Android中提供了Intent机制来协助应用间的交互与通讯，Intent负责对应用中一次操作的动作、动作涉及数据、附加数据进行描述，Android则根据此Intent的描述，负责找到对应的组件，将 Intent传递给调用的组件，并完成组件的调用。Intent不仅可用于应用程序之间，也可用于应用程序内部的Activity/Ser">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=028c63b1" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?db8b6fe9cdaa19c6f921958de5b22778";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是Intent"><span class="toc-text">1. 什么是Intent?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-什么是Bundle"><span class="toc-text">2. 什么是Bundle?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Intent如何传递数据？"><span class="toc-text">3. Intent如何传递数据？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-id不能在string-xml中定义"><span class="toc-text">4. id不能在string.xml中定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-onActivityResult-方法"><span class="toc-text">5. onActivityResult()方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Android-Studio如何导入jar包"><span class="toc-text">6. Android Studio如何导入jar包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-SocketException"><span class="toc-text">7. SocketException</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-添加权限的两种方式"><span class="toc-text">8. 添加权限的两种方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-NetworkOnMainThreadException"><span class="toc-text">9. NetworkOnMainThreadException</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-gbk与gb2312的区别？"><span class="toc-text">10. gbk与gb2312的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-GridView-表格布局-？"><span class="toc-text">11. GridView(表格布局)？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-HashMap与Map区别？"><span class="toc-text">12. HashMap与Map区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-SimpleAdapter"><span class="toc-text">13. SimpleAdapter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-List-ArrayList-LinkedList區別？"><span class="toc-text">14. List, ArrayList, LinkedList區別？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-ArrayAdapter和BaseAdapter区别？"><span class="toc-text">15. ArrayAdapter和BaseAdapter区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-final类有什么特别之处？"><span class="toc-text">16. final类有什么特别之处？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-CharSequence与String的区别？"><span class="toc-text">17. CharSequence与String的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-Display-getWidth-和Display-getHeight-已被废弃"><span class="toc-text">18. Display.getWidth()和Display.getHeight()已被废弃</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-StringTokenizer是什么类型？"><span class="toc-text">19. StringTokenizer是什么类型？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-ListView却没有刷新？"><span class="toc-text">20. ListView却没有刷新？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-注册上下文菜单？"><span class="toc-text">21. 注册上下文菜单？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-Handler怎么用？"><span class="toc-text">22. Handler怎么用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-返回键监听实现"><span class="toc-text">23. 返回键监听实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-subString-begin-end"><span class="toc-text">24. subString(begin,end)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-单例模式"><span class="toc-text">25. 单例模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-与SD卡操作有关的权限"><span class="toc-text">26. 与SD卡操作有关的权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-FileNotFoundException"><span class="toc-text">27. FileNotFoundException</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-Android-Studio-Build失败"><span class="toc-text">28. Android Studio Build失败</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29-FileNotFoundException"><span class="toc-text">29. FileNotFoundException</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#30-选择本地文件？"><span class="toc-text">30. 选择本地文件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#31-FileOutputStream构造函数？"><span class="toc-text">31. FileOutputStream构造函数？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-Java如何终止线程？"><span class="toc-text">32. Java如何终止线程？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-double类型保留两位小数"><span class="toc-text">33. double类型保留两位小数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-获取本地文件大小"><span class="toc-text">34. 获取本地文件大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-LayoutInflater与MenuInflater"><span class="toc-text">35. LayoutInflater与MenuInflater</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-FTPClient库的使用"><span class="toc-text">36. FTPClient库的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#36-1-FTPFile获得文件的大小"><span class="toc-text">36.1 FTPFile获得文件的大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-2-连接服务器"><span class="toc-text">36.2 连接服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-3-SocketException"><span class="toc-text">36.3 SocketException</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-4-ftp反馈码："><span class="toc-text">36.4 ftp反馈码：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-5-FTPClient-listFiles-不能获取文件，返回数据为空"><span class="toc-text">36.5 FTPClient.listFiles()不能获取文件，返回数据为空</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-6-ftpClient-changeWorkingDirectory-path-切换目录失败"><span class="toc-text">36.6 ftpClient.changeWorkingDirectory(path)切换目录失败</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-7-ftpClient-listFiles-path"><span class="toc-text">36.7 ftpClient.listFiles(path)</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Android基本概念和語法" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Android基本概念和語法</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.10.16</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Bruce Yu</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/mobile-development/">mobile development</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
        <i class="icon-comment"></i> 
        <span class="ds-thread-count" data-thread-key="post-Android基本概念和語法"><i class="fa fa-spinner fa-spin"></i></span> 条评论
      

    </div>

  </header>

  <div class="article-content">

    
      <h2 id="1-什么是Intent"><a href="#1-什么是Intent" class="headerlink" title="1. 什么是Intent?"></a>1. 什么是Intent?</h2><p>Intent的中文意思是“意图，意向”，在Android中提供了Intent机制来协助应用间的交互与通讯，Intent负责对应用中一次操作的动作、动作涉及数据、附加数据进行描述，Android则根据此Intent的描述，负责找到对应的组件，将 Intent传递给调用的组件，并完成组件的调用。Intent不仅可用于应用程序之间，也可用于应用程序内部的Activity/Service之间的交互。</p>
<h2 id="2-什么是Bundle"><a href="#2-什么是Bundle" class="headerlink" title="2. 什么是Bundle?"></a>2. 什么是Bundle?</h2><p>键值对类</p>
<h2 id="3-Intent如何传递数据？"><a href="#3-Intent如何传递数据？" class="headerlink" title="3. Intent如何传递数据？"></a>3. Intent如何传递数据？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//发送端</div><div class="line">Intent intent = new Intent();</div><div class="line">intent.setClass(Login.this, MainActivity.class);</div><div class="line">Bundle bundle = new Bundle();</div><div class="line">bundle.putSerializable(&quot;user&quot;, user);</div><div class="line">intent.putExtras(bundle);</div><div class="line">this.startActivity(intent);</div><div class="line"></div><div class="line">//接收端</div><div class="line">Intent intent = this.getIntent(); </div><div class="line">user=(User)intent.getSerializableExtra(&quot;user&quot;);</div></pre></td></tr></table></figure>
<h2 id="4-id不能在string-xml中定义"><a href="#4-id不能在string-xml中定义" class="headerlink" title="4. id不能在string.xml中定义"></a>4. id不能在string.xml中定义</h2><p>控件id的格式：”@+id/id名”</p>
<h2 id="5-onActivityResult-方法"><a href="#5-onActivityResult-方法" class="headerlink" title="5. onActivityResult()方法"></a>5. onActivityResult()方法</h2><p>在onActivityResult(int requestCode, int resultCode, Intent data)方法中有现成的Intent,即data,无需通过getIntent获取Intent,再通過Intent獲取數據</p>
<h2 id="6-Android-Studio如何导入jar包"><a href="#6-Android-Studio如何导入jar包" class="headerlink" title="6. Android Studio如何导入jar包"></a>6. Android Studio如何导入jar包</h2><ol>
<li>复制你需要添加的jar，并将其黏贴到app –&gt; libs文件夹下</li>
<li>右键点击新添加的jar，在弹出菜单中点击Add As Library</li>
</ol>
<h2 id="7-SocketException"><a href="#7-SocketException" class="headerlink" title="7. SocketException"></a>7. SocketException</h2><p>具體異常：<br>java.net.SocketException: socket failed: EACCES (Permission denied)</p>
<p>说明：缺少网络访问权限 </p>
<p>解决方案：<br>在AndroidManifest.xml中添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</div></pre></td></tr></table></figure></p>
<h2 id="8-添加权限的两种方式"><a href="#8-添加权限的两种方式" class="headerlink" title="8. 添加权限的两种方式"></a>8. 添加权限的两种方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//第一种方式</div><div class="line">&lt; uses-permission   android:name =”android.permission.INTERNET”  /&gt;  </div><div class="line">//第二种方式</div><div class="line">&lt; application   android:permission =”android.permission.INTERNET” /&gt;</div></pre></td></tr></table></figure>
<h2 id="9-NetworkOnMainThreadException"><a href="#9-NetworkOnMainThreadException" class="headerlink" title="9. NetworkOnMainThreadException"></a>9. NetworkOnMainThreadException</h2><p>具體異常：<br>android.os.NetworkOnMainThreadException</p>
<p>说明:不允许在主线程中进行网络访问</p>
<p>解决方案：将网络访问的操作单独放到一个线程中</p>
<h2 id="10-gbk与gb2312的区别？"><a href="#10-gbk与gb2312的区别？" class="headerlink" title="10. gbk与gb2312的区别？"></a>10. gbk与gb2312的区别？</h2><p>GB2312是中国规定的汉字编码，也可以说是简体中文的字符集编码;GBK 是 GB2312的扩展 ,除了兼容GB2312外，它还能显示繁体中文，还有日文的假名</p>
<h2 id="11-GridView-表格布局-？"><a href="#11-GridView-表格布局-？" class="headerlink" title="11. GridView(表格布局)？"></a>11. GridView(表格布局)？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">android:numColumns=”auto_fit” ，GridView的列数设置为自动</div><div class="line">android:columnWidth=”90dp”，每列的宽度，也就是Item的宽度</div><div class="line">android:stretchMode=”columnWidth”，缩放与列宽大小同步</div></pre></td></tr></table></figure>
<h2 id="12-HashMap与Map区别？"><a href="#12-HashMap与Map区别？" class="headerlink" title="12. HashMap与Map区别？"></a>12. HashMap与Map区别？</h2><p>hashmap是继承map接口的实现类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Map&lt;bluh&gt; map1 = new HashMap&lt;bluh&gt;();</div><div class="line">HashMap&lt;bluh&gt; map2 = new HashMap&lt;bluh&gt;();</div></pre></td></tr></table></figure>
<p>説明：</p>
<ol>
<li>定义为Map之后更灵活 今后才有可能在需要的时候替换为HashMap之外的其它实现如TreeMap等，同时如Joshua Bloch等大师也倡导面向接口编程(code to interfaces)</li>
<li>有得必有失，第一种的tradeoff就是无法调用HashMap特有的方法</li>
</ol>
<h2 id="13-SimpleAdapter"><a href="#13-SimpleAdapter" class="headerlink" title="13. SimpleAdapter"></a>13. SimpleAdapter</h2><p>構造函數：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SimpleAdapter(Context context, List&lt;? extends Map&lt;String, ?&gt;&gt; data, int resource, String[] from, int[] to)</div></pre></td></tr></table></figure>
<ol>
<li><p>SimpleAdapter是扩展性最好的适配器，可以定义各种你想要的布局，而且使用很方便</p>
</li>
<li><p>參數含義</p>
<ul>
<li>context：上下文，比如this。关联SimpleAdapter运行的视图上下文</li>
<li>data：Map列表，列表要显示的数据，这部分需要自己实现，如例子中的getData()类型要与上面的一致，每条项目要与from中指定条目一致</li>
<li>resource：ListView单项布局文件的Id,这个布局就是你自定义的布局了，你想显示什么样子的布局都在这个布局中。这个佈局中必须包括了to中定义的控件id</li>
<li>from：一个被添加到Map上关联每一个项目列名称的列表，数组里面是列名称</li>
<li>to：是一个int数组，数组里面的id是自定义布局中各个控件的id，需要与上面的from对应</li>
</ul>
</li>
</ol>
<h2 id="14-List-ArrayList-LinkedList區別？"><a href="#14-List-ArrayList-LinkedList區別？" class="headerlink" title="14. List, ArrayList, LinkedList區別？"></a>14. List, ArrayList, LinkedList區別？</h2><ol>
<li>LinkedList: 双向列表：表中的每个节点都包含了对前一个和后一个元素的引用</li>
<li>ArrayList和LinkedList的大致区别： <ul>
<li>ArrayList是实现了基于动态数组的数据结构，LinkedList基于链表的数据结构。 </li>
<li>对于随机访问get和set，ArrayList觉得优于LinkedList，因为LinkedList要移动指针。 </li>
<li>对于新增和删除操作add和remove，LinedList比较占优势，因为ArrayList要移动数据。 </li>
<li>List是一个接口 ArrayList是List接口下的一个实现类</li>
</ul>
</li>
</ol>
<h2 id="15-ArrayAdapter和BaseAdapter区别？"><a href="#15-ArrayAdapter和BaseAdapter区别？" class="headerlink" title="15. ArrayAdapter和BaseAdapter区别？"></a>15. ArrayAdapter和BaseAdapter区别？</h2><p>ArrayAdapter是从BaseAdapter派生出来的，具备BaseAdapter的所有功能，但ArrayAdapter更为强大，它实例化时可以直接使用泛型构造，同时ArrayAdapter可以实现像数组一样的操作</p>
<h2 id="16-final类有什么特别之处？"><a href="#16-final类有什么特别之处？" class="headerlink" title="16. final类有什么特别之处？"></a>16. final类有什么特别之处？</h2><ul>
<li>final类不能被继承，没有子类，final类中的方法默认是final的。 </li>
<li>final方法不能被子类的方法覆盖，但可以被继承。 </li>
<li>final成员变量表示常量，只能被赋值一次，赋值后值不再改变。 </li>
<li>final不能用于修饰构造方法。</li>
<li>final变量定义的时候，可以先声明，而不给初值，这中变量也称为final空白，无论什么情况，编译器都确保空白final在使用之前必须被初始化。但是，final空白在final的使用上提供了更大的灵活性，为此，一个类中的final数据成员就可以实现依对象而有所不同，却有保持其恒定不变的特征。</li>
<li>当函数参数为final类型时，你可以读取使用该参数，但是无法改变该参数的值。</li>
</ul>
<h2 id="17-CharSequence与String的区别？"><a href="#17-CharSequence与String的区别？" class="headerlink" title="17. CharSequence与String的区别？"></a>17. CharSequence与String的区别？</h2><p>String 是java中的字符串，它继承于CharSequence。</p>
<ul>
<li><p>拓展</p>
<p>  StringBuilder和StringBuffer都是可变的字符序列。它们都继承于AbstractStringBuilder，实现了CharSequence接口。StringBuilder是非线程安全的，而StringBuffer是线程安全的</p>
</li>
</ul>
<h2 id="18-Display-getWidth-和Display-getHeight-已被废弃"><a href="#18-Display-getWidth-和Display-getHeight-已被废弃" class="headerlink" title="18. Display.getWidth()和Display.getHeight()已被废弃"></a>18. Display.getWidth()和Display.getHeight()已被废弃</h2><p>替代方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">DisplayMetrics dm = new DisplayMetrics();</div><div class="line">getWindowManager().getDefaultDisplay().getMetrics(dm);</div><div class="line">SCREEN_WIDTH = dm.widthPixels;</div><div class="line">SCREEN_HEIGHT = dm.heightPixels;</div></pre></td></tr></table></figure></p>
<h2 id="19-StringTokenizer是什么类型？"><a href="#19-StringTokenizer是什么类型？" class="headerlink" title="19. StringTokenizer是什么类型？"></a>19. StringTokenizer是什么类型？</h2><p>用来分隔String的应用类，与split函数相似</p>
<h2 id="20-ListView却没有刷新？"><a href="#20-ListView却没有刷新？" class="headerlink" title="20. ListView却没有刷新？"></a>20. ListView却没有刷新？</h2><p>ListView中的数据对象始终都只能有一个，不能重新new一个新的List对象</p>
<h2 id="21-注册上下文菜单？"><a href="#21-注册上下文菜单？" class="headerlink" title="21. 注册上下文菜单？"></a>21. 注册上下文菜单？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public void onCreateContextMenu(ContextMenu menu, View v,</div><div class="line">        ContextMenuInfo menuInfo) &#123;</div><div class="line">    menu.setHeaderIcon(R.drawable.header);</div><div class="line">    switch (v.getId()) &#123;</div><div class="line">    case R.id.editText01:</div><div class="line">        menu.add(0, MENU1, 0, &quot;菜单项1&quot;);</div><div class="line">        menu.add(0, MENU2, 0, &quot;菜单项2&quot;);</div><div class="line">        menu.add(0, MENU3, 0, &quot;菜单项3&quot;);</div><div class="line">        break;</div><div class="line">    case R.id.editText02:</div><div class="line">        menu.add(0, MENU4, 0, &quot;菜单项4&quot;);</div><div class="line">        menu.add(0, MENU5, 0, &quot;菜单项5&quot;);</div><div class="line">        break;</div><div class="line">    &#125;</div><div class="line">    //super.onCreateContextMenu(menu, v, menuInfo);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Override</div><div class="line">public boolean onContextItemSelected(MenuItem item) &#123;</div><div class="line">    switch (item.getItemId()) &#123;</div><div class="line">    case MENU1:</div><div class="line">    case MENU2:</div><div class="line">    case MENU3:</div><div class="line">        editText01.append(&quot;\n&quot;+item.getTitle()+&quot;被按下&quot;);</div><div class="line">        break;</div><div class="line">    case MENU4:</div><div class="line">    case MENU5:</div><div class="line">        editText02.append(&quot;\n&quot;+item.getTitle()+&quot;被按下&quot;);</div><div class="line">        break;</div><div class="line">    &#125;</div><div class="line">    return true;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>添加上下文菜单方法：</p>
<p>方法簽名：public MenuItem add(int groupId, int itemId, int order, CharSequence title)</p>
<p>参数解析：</p>
<ul>
<li>第一个int类型的group ID参数，代表的是组概念，你可以将几个菜单项归为一组，以便更好的以组的方式管理你的菜单按钮。</li>
<li>第二个int类型的item ID参数，代表的是项目编号。这个参数非常重要，一个item ID对应一个menu中的选项。在后面使用菜单的时候，就靠这个item ID来判断你使用的是哪个选项。</li>
<li>第三个int类型的order ID参数，代表的是菜单项的显示顺序。默认是0，表示菜单的显示顺序就是按照add的显示顺序来显示。</li>
<li>第四个String类型的title参数，表示选项中显示的文字。</li>
</ul>
</blockquote>
<h2 id="22-Handler怎么用？"><a href="#22-Handler怎么用？" class="headerlink" title="22. Handler怎么用？"></a>22. Handler怎么用？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">myHandler = new Handler() &#123;</div><div class="line">        @Override</div><div class="line">        public void handleMessage(Message msg) &#123;</div><div class="line">            super.handleMessage(msg);</div><div class="line">            switch (msg.what) &#123;</div><div class="line">                case MESSAGE_UPDATE_UI:</div><div class="line">                    do...</div><div class="line">                    break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">//发送消息</div><div class="line">Message message = new Message();</div><div class="line">message.what = MESSAGE_UPDATE_UI;</div><div class="line">myHandler.sendMessage(message);</div></pre></td></tr></table></figure>
<h2 id="23-返回键监听实现"><a href="#23-返回键监听实现" class="headerlink" title="23. 返回键监听实现"></a>23. 返回键监听实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean onKeyDown(int keyCode, KeyEvent event) &#123;</div><div class="line">    if (keyCode == KeyEvent.KEYCODE_BACK) &#123;</div><div class="line">        doKeyBack();</div><div class="line">        return false;</div><div class="line">    &#125; else &#123;</div><div class="line">        return super.onKeyDown(keyCode, event);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//注：必须把return super.onKeyDown(keyCode, event)放到else中，或者直接删除，否则重写方法将会无效</div></pre></td></tr></table></figure>
<h2 id="24-subString-begin-end"><a href="#24-subString-begin-end" class="headerlink" title="24. subString(begin,end)"></a>24. subString(begin,end)</h2><p>説明：返回begin到end-1位置的字符串</p>
<h2 id="25-单例模式"><a href="#25-单例模式" class="headerlink" title="25. 单例模式"></a>25. 单例模式</h2><p>分类：饿汉式，懒汉式，登记式</p>
<h2 id="26-与SD卡操作有关的权限"><a href="#26-与SD卡操作有关的权限" class="headerlink" title="26. 与SD卡操作有关的权限"></a>26. 与SD卡操作有关的权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!– 在SDCard中创建与删除文件权限 –&gt;</div><div class="line">&lt;uses-permission</div><div class="line">android:name=”android.permission.MOUNT_UNMOUNT_FILESYSTEMS”/&gt;</div><div class="line">&lt;!– 往SDCard写入数据权限 –&gt;</div><div class="line">&lt;uses-permission</div><div class="line">android:name=”android.permission.WRITE_EXTERNAL_STORAGE”/&gt;</div><div class="line">&lt;!– 读取SDCard数据权限 –&gt;</div><div class="line">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</div></pre></td></tr></table></figure>
<h2 id="27-FileNotFoundException"><a href="#27-FileNotFoundException" class="headerlink" title="27. FileNotFoundException"></a>27. FileNotFoundException</h2><p>具體異常：</p>
<blockquote>
<p>java.io.FileNotFoundException: /storage/emulated/0report-1.doc: open failed: EACCES (Permission denied)<br>Caused by: android.system.ErrnoException: open failed: EACCES (Permission denied)</p>
</blockquote>
<p>原因：路径问题，Environment.getExternalStorageDirectory().getPath()获得路径结尾不含”/“,所以在構造文件路徑時，需在末尾添加“/”，再連接文件名</p>
<p>注：涉及到文件传输时，一定要注意路径，很多时候都是因为路径不对才引起异常等错误。</p>
<h2 id="28-Android-Studio-Build失败"><a href="#28-Android-Studio-Build失败" class="headerlink" title="28. Android Studio Build失败"></a>28. Android Studio Build失败</h2><p>有时Manifest文件有错误，可能会Build失败。出现cannot resolve symbol R 的错误</p>
<h2 id="29-FileNotFoundException"><a href="#29-FileNotFoundException" class="headerlink" title="29. FileNotFoundException"></a>29. FileNotFoundException</h2><p>具體異常：</p>
<blockquote>
<p>java.io.FileNotFoundException: /systemreport-1.doc: open failed: EROFS (Read-only file system)<br>Caused by: android.system.ErrnoException: open failed: EROFS (Read-only file system)</p>
</blockquote>
<p>原因：文件夹为只读，檢查文件路徑是否正確</p>
<h2 id="30-选择本地文件？"><a href="#30-选择本地文件？" class="headerlink" title="30. 选择本地文件？"></a>30. 选择本地文件？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">//调用系统文件选择器选择文件</div><div class="line">private void showFileChooser() &#123;</div><div class="line">    Intent intent = new Intent(Intent.ACTION_GET_CONTENT); </div><div class="line">    intent.setType(&quot;*/*&quot;); </div><div class="line">    intent.addCategory(Intent.CATEGORY_OPENABLE);</div><div class="line"> </div><div class="line">    try &#123;</div><div class="line">        startActivityForResult( Intent.createChooser(intent, &quot;Select a File to Upload&quot;), FILE_SELECT_CODE);</div><div class="line">    &#125; catch (android.content.ActivityNotFoundException ex) &#123;</div><div class="line">        Toast.makeText(this, &quot;Please install a File Manager.&quot;,  Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//接收选择的文件</div><div class="line">    @Override</div><div class="line">protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123;</div><div class="line">    super.onActivityResult(requestCode, resultCode, data);</div><div class="line">    switch (requestCode) &#123;</div><div class="line">        case FILE_SELECT_CODE:</div><div class="line">            if (resultCode == RESULT_OK) &#123;</div><div class="line">                // Get the Uri of the selected file</div><div class="line">                Uri uri = data.getData();</div><div class="line">                localPath = FileUtils.getPath(this, uri);</div><div class="line">                Toast.makeText(this, &quot;选择文件成功&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                Message msg = new Message();</div><div class="line">                msg.what = FILE_SELECT_SUCCESS;</div><div class="line">                myHandler.sendMessage(msg);</div><div class="line">            &#125; else &#123;</div><div class="line">                Toast.makeText(this, &quot;选择文件失败&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">            &#125;</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//FileUtils类</div><div class="line">public class FileUtils &#123;</div><div class="line">	public static String getPath(Context context, Uri uri) &#123;</div><div class="line"></div><div class="line">	    if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) &#123;</div><div class="line">	        String[] projection = &#123;&quot;_data&quot;&#125;;</div><div class="line">	        Cursor cursor = null;</div><div class="line"></div><div class="line">	        try &#123;</div><div class="line">	            cursor = context.getContentResolver().query(uri, projection, null, null, null);</div><div class="line">	            int column_index = cursor.getColumnIndexOrThrow(&quot;_data&quot;);</div><div class="line">	            if (cursor.moveToFirst()) &#123;</div><div class="line">	                return cursor.getString(column_index);</div><div class="line">	            &#125;</div><div class="line">	        &#125; catch (Exception e) &#123;</div><div class="line">	            // Eat it</div><div class="line">	        &#125;</div><div class="line">	    &#125; else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) &#123;</div><div class="line">	        return uri.getPath();</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    return null;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="31-FileOutputStream构造函数？"><a href="#31-FileOutputStream构造函数？" class="headerlink" title="31. FileOutputStream构造函数？"></a>31. FileOutputStream构造函数？</h2><p>方法簽名：</p>
<blockquote>
<p>FileOutputStream(f, append);</p>
</blockquote>
<p>参数解析：</p>
<p>第一个参数是文件对象，第二个参数是是否追加数据；</p>
<h2 id="32-Java如何终止线程？"><a href="#32-Java如何终止线程？" class="headerlink" title="32. Java如何终止线程？"></a>32. Java如何终止线程？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public void run() &#123;</div><div class="line">	while(flag)&#123; // 通过flag控制</div><div class="line">	/* do your no-block task */</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注：Thread中的run()方法，不是start()之后就重复调用run()方法，run()方法也只能运行一次，直到run中的所有方法运行完成</p>
<h2 id="33-double类型保留两位小数"><a href="#33-double类型保留两位小数" class="headerlink" title="33. double类型保留两位小数"></a>33. double类型保留两位小数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);  </div><div class="line">df.format(doubleValue);</div></pre></td></tr></table></figure>
<h2 id="34-获取本地文件大小"><a href="#34-获取本地文件大小" class="headerlink" title="34. 获取本地文件大小"></a>34. 获取本地文件大小</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">long size = 0;</div><div class="line">try &#123;</div><div class="line">    java.io.File file = new java.io.File(filePath);</div><div class="line">    if (file.exists()) &#123;</div><div class="line">        FileInputStream fis = new FileInputStream(file);</div><div class="line">        size = fis.available();</div><div class="line">    &#125; else &#123;</div><div class="line">	// file.createNewFile();</div><div class="line">        Log.e(&quot;获取文件大小&quot;, &quot;文件不存在!&quot;);</div><div class="line">    &#125;</div><div class="line">&#125; catch (IOException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div><div class="line">return size;</div></pre></td></tr></table></figure>
<h2 id="35-LayoutInflater与MenuInflater"><a href="#35-LayoutInflater与MenuInflater" class="headerlink" title="35. LayoutInflater与MenuInflater"></a>35. LayoutInflater与MenuInflater</h2><ul>
<li>LayoutInflater: 解析定义在layout下的布局文件</li>
<li>MenuInflater: 解析定义在menu目录下的菜单布局文件</li>
</ul>
<h2 id="36-FTPClient库的使用"><a href="#36-FTPClient库的使用" class="headerlink" title="36. FTPClient库的使用"></a>36. FTPClient库的使用</h2><h3 id="36-1-FTPFile获得文件的大小"><a href="#36-1-FTPFile获得文件的大小" class="headerlink" title="36.1 FTPFile获得文件的大小"></a>36.1 FTPFile获得文件的大小</h3><p>获得文件大小：file.getSize(); </p>
<h3 id="36-2-连接服务器"><a href="#36-2-连接服务器" class="headerlink" title="36.2 连接服务器"></a>36.2 连接服务器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ftpClient.connect(&quot;服务器名&quot;,端口号);</div></pre></td></tr></table></figure>
<h3 id="36-3-SocketException"><a href="#36-3-SocketException" class="headerlink" title="36.3 SocketException"></a>36.3 SocketException</h3><p>具體異常：<br>java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)</p>
<p>说明：应该是过度频繁的请求连接导致</p>
<p>解决方案：ftpClient.setKeepAlive(true);</p>
<h3 id="36-4-ftp反馈码："><a href="#36-4-ftp反馈码：" class="headerlink" title="36.4 ftp反馈码："></a>36.4 ftp反馈码：</h3><blockquote>
<p>220 Service ready for new user（新连接的用户的服务已就绪)<br>530 Not logged in.</p>
</blockquote>
<h3 id="36-5-FTPClient-listFiles-不能获取文件，返回数据为空"><a href="#36-5-FTPClient-listFiles-不能获取文件，返回数据为空" class="headerlink" title="36.5 FTPClient.listFiles()不能获取文件，返回数据为空"></a>36.5 FTPClient.listFiles()不能获取文件，返回数据为空</h3><p>解决方案：调用FTPClient.listFiles()方法前，先调用FTPClient.enterLocalPassiveMode()<br>enterLocalPassiveMode()的意思是每次数据连接之前，ftp client告诉ftp server开通一个端口来传输数据</p>
<h3 id="36-6-ftpClient-changeWorkingDirectory-path-切换目录失败"><a href="#36-6-ftpClient-changeWorkingDirectory-path-切换目录失败" class="headerlink" title="36.6 ftpClient.changeWorkingDirectory(path)切换目录失败"></a>36.6 ftpClient.changeWorkingDirectory(path)切换目录失败</h3><p>可能原因： 路徑不支持中文</p>
<p>解决方案：</p>
<blockquote>
<p>ftpClient.changeWorkingDirectory(new String(currentPath.getBytes(“GBK”),”ISO-8859-1”))  </p>
</blockquote>
<ul>
<li><p>注：</p>
<ol>
<li>FTP.DEFAULT_CONTROL_ENCODING = “ISO-8859-1”,可互换</li>
<li>getBytes(“GBK”)中的参数”GBK”不能省，否则默认是”UTF-8”</li>
</ol>
</li>
</ul>
<h3 id="36-7-ftpClient-listFiles-path"><a href="#36-7-ftpClient-listFiles-path" class="headerlink" title="36.7 ftpClient.listFiles(path)"></a>36.7 ftpClient.listFiles(path)</h3><p>path参数不支持中文,解决方案同36.6</p>

    
  </div>
</article>

</div>





  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    
  <section class="duoshuo-comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-Android基本概念和語法" data-title="Android基本概念和語法" data-url="https://bruceyu1994.github.io/2016/10/16/Android基本概念和語法/index.html"></div>
    <!-- 多说评论框 end -->
  </section>




  <script type="text/javascript">
  var duoshuoQuery = {short_name:"bruceyu"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>


  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
